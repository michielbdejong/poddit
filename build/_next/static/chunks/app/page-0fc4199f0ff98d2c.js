(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6169:(e,t,n)=>{Promise.resolve().then(n.bind(n,1890))},1890:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var l=n(5155),r=n(2115),i=n(3443);n(1485);let s=(0,r.createContext)(void 0);function a(){return(0,r.useContext)(s)}function o(){let e=a();return e?e.isLoggedIn:void 0}function c(e){let{children:t=null}=e;return o()?t:null}function d(e){let{children:t="Log in",className:n="solid login",handleLogin:r=()=>{}}=e;return(0,l.jsx)("button",{className:n,onClick:r,children:t})}function u(e){let{children:t=null}=e;return o()?null:t}function h(e){let{children:t="Log out",className:n="solid auth logout",handleLogout:r=()=>{}}=e;return(0,l.jsx)("button",{className:n,onClick:r,children:t})}let m=e=>{let{links:t}=e;return(0,l.jsx)("ul",{children:t.sort(w).map(p)})};function w(e,t){return t.created.getTime()-e.created.getTime()}function p(e,t){return(0,l.jsx)("li",{className:"card section",children:(0,l.jsx)("p",{className:"content is-large",children:(0,l.jsx)("a",{href:e.url,title:"View ".concat(e.title||e.url),children:e.title||e.url})})},t)}var v=n(6105);v.A("http://www.w3.org/ns/solid/terms#");let f=v.A("http://www.w3.org/2002/01/bookmark#");v.A("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),v.A("https://www.w3.org/ns/activitystreams#"),v.A("http://www.w3.org/ns/ldp#"),v.A("http://www.w3.org/2001/XMLSchema#"),v.A("http://www.w3.org/ns/pim/space#");let g=v.A("http://purl.org/dc/terms/"),x=v.A("http://www.w3.org/2006/vcard/ns#");var j=n(8841),N=n(9821),y=n(9210);function b(e){let t=new j.A(e,{fetch:i.hd}),n=new N.A(e);return new y.A({store:e,fetcher:t,updater:n})}async function k(e,t){let n=await e.discoverStorage(t);return n.privateUrls.concat(n.publicUrls)}async function A(e,t,n){let l=b(e),r=await k(l,t);if(console.log(r),r.length>=1){let e="".concat(r[0],"#").concat(Array.from(window.crypto.getRandomValues(new Uint8Array(Math.ceil(8))),e=>("0"+(255&e).toString(16)).slice(-2)).join(""));return await l.createBookmark({storageUrl:e,title:n.title,url:n.url}),e}throw Error("no place discovered for storing bookmarks")}function S(){let e=a();return e?e.webId:void 0}var C=n(7847);async function L(e,t){let n=b(e);return console.log(await n.discoverStorage(t)),[]}function E(){let e;let t=S(),[n,s]=r.useState(),[a,o]=r.useState(),[c,d]=r.useReducer((e,t)=>e.concat(t),[]),u=function(){let e=S(),[t,n]=r.useState();return r.useEffect(()=>{if(e){let t=C.JB(),l=t.sym(e),r=new j.A(t,{fetch:i.hd});(async()=>{await r.load(l.doc()),n(t)})()}},[e]),t}(),h=function(e){let t=S(),[n,l]=r.useState();return r.useEffect(()=>{e&&t&&(async()=>{let n=await L(e,t),r=new j.A(e,{fetch:i.hd});await r.load(n.map(e=>e.value)),l(n)})()},[e,t]),n}(u),w=[];async function p(e){if(e.preventDefault(),!u||!t||!n||!a)return;let l={url:n,title:a,created:new Date};d(l),await A(u,t,l)}u&&h&&(e=null==u?void 0:u.any(u.sym(t),x("fn"),void 0,void 0),w=h.map(e=>{let t=u.any(e,f("recalls"),void 0,void 0),n=u.any(e,g("title"),void 0,void 0),l=u.any(e,g("created"),void 0,void 0);return{url:t.value,title:n?n.value:t.value,created:new Date(l?l.value:0)}}));let v=e?"".concat(e.toString(),"'s links"):"Your links";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"hero is-info",children:(0,l.jsx)("div",{className:"hero-body",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("h2",{className:"title",children:v})})})}),(0,l.jsx)("section",{className:"section",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("form",{onSubmit:p,className:"field is-horizontal",children:(0,l.jsxs)("div",{className:"field-body",children:[(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{htmlFor:"shareLink",className:"label",children:"URL"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{id:"shareLink",required:!0,className:"input is-large",type:"url",placeholder:"e.g. `https://solid.community`",onChange:e=>s(e.target.value)})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{htmlFor:"shareTitle",className:"label",children:"Title"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{id:"shareTitle",required:!0,className:"input is-large",type:"text",placeholder:"e.g. `Solid prototype server`",onChange:e=>o(e.target.value)})})]}),(0,l.jsx)("div",{className:"control pageSubmit",children:(0,l.jsx)("input",{type:"submit",className:"button is-large is-primary",value:"Add link"})})]})}),(0,l.jsx)(m,{links:c.concat(w)})]})})]})}function _(){let[e]=(0,r.useState)("https://pivot.pondersource.com/"),[t,n]=(0,r.useState)();return(0,r.useEffect)(()=>{(0,i.nY)({restorePreviousSession:!0}).then(e=>{n(e)})},[]),(0,l.jsx)("div",{children:(0,l.jsxs)(s.Provider,{value:t,children:[(0,l.jsx)(c,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)(E,{}),(0,l.jsx)("footer",{className:"footer",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)(h,{className:"button is-pulled-right",handleLogout:()=>{(0,i.ri)(),n(void 0)},children:"Disconnect"})})})]})}),(0,l.jsx)(u,{children:(0,l.jsx)("section",{className:"section",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)(d,{className:"button is-large is-primary",handleLogin:()=>{(0,i.iD)({redirectUrl:"https://poddit.app/",oidcIssuer:e,clientName:"poddit",clientId:"https://poddit.app/clientid.jsonld"})},children:"Connect to start bookmarking"})})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[114,621,441,517,358],()=>t(6169)),_N_E=e.O()}]);