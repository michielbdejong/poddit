(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6169:(e,t,n)=>{Promise.resolve().then(n.bind(n,7922))},7922:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var a=n(5155),i=n(2115),l=n(3443);n(1485);let s=(0,i.createContext)(void 0);function r(){return(0,i.useContext)(s)}function o(){let e=r();return e?e.isLoggedIn:void 0}function c(e){let{children:t=null}=e;return o()?t:null}function d(e){let{children:t="Log in",className:n="solid login",handleLogin:i=()=>{}}=e;return(0,a.jsx)("button",{className:n,onClick:i,children:t})}function u(e){let{children:t=null}=e;return o()?null:t}function h(e){let{children:t="Log out",className:n="solid auth logout",handleLogout:i=()=>{}}=e;return(0,a.jsx)("button",{className:n,onClick:i,children:t})}let v=e=>{let{links:t}=e;return(0,a.jsx)("ul",{children:t.sort(m).map(p)})};function m(e,t){return t.created.getTime()-e.created.getTime()}function p(e,t){return(0,a.jsx)("li",{className:"card section",children:(0,a.jsx)("p",{className:"content is-large",children:(0,a.jsx)("a",{href:e.url,title:"View ".concat(e.title||e.url),children:e.title||e.url})})},t)}var w=n(6105);let f=w.A("http://www.w3.org/ns/solid/terms#"),x=w.A("http://www.w3.org/2002/01/bookmark#"),g=w.A("http://www.w3.org/1999/02/22-rdf-syntax-ns#");w.A("https://www.w3.org/ns/activitystreams#"),w.A("http://www.w3.org/ns/ldp#");let j=w.A("http://www.w3.org/2001/XMLSchema#"),y=w.A("http://www.w3.org/ns/pim/space#"),N=w.A("http://purl.org/dc/terms/"),k=w.A("http://www.w3.org/2006/vcard/ns#");var b=n(8841),A=n(7847),S=n(9821);async function C(e,t){let n=await L(e,t);return await T(e,n)}async function L(e,t){let n=e.sym(t),a=new b.A(e,{fetch:l.hd}),i=e.any(n,f("publicTypeIndex"),void 0,void 0);await a.load(i);let s=e.any(void 0,f("forClass"),x("Bookmark"),void 0);if(void 0===s){let t=e.any(n,y("storage"),void 0,void 0),a="".concat(t.value,"public/poddit.ttl"),l=A.ov("".concat(i.value,"#poddit")),r=[A.st(i,N("references"),l,i),A.st(l,g("type"),f("TypeRegistration"),l.doc()),A.st(l,f("forClass"),x("Bookmark"),l.doc()),A.st(l,f("instance"),A.ov(a),l.doc())];new S.A(e).update([],r,(e,t,n)=>{}),s=e.any(l,f("instance"),void 0,void 0)}return s}async function T(e,t){let n=new b.A(e,{fetch:l.hd}),a=e.any(t,f("instance"),void 0,void 0);try{await n.load(a)}catch(t){let e=A.ov(a.value);await n.putBack(e)}return a}async function B(e,t,n){let a=await C(e,t),i=new b.A(e,{fetch:l.hd}),s=e.any(void 0,x("recalls"),n.url,void 0);if(null===s){let t=A.ov(a.value+"#"+Math.random()+".ttl");e.add(a,N("references"),t,a),e.add(t,g("type"),x("Bookmark"),t.doc()),e.add(t,N("created"),A.cO(n.created.toISOString(),null,j("dateTime")),t.doc()),e.add(t,x("recalls"),A.cO(n.url,null,j("string")),t.doc()),e.add(t,N("title"),A.cO(n.title,null,j("string")),t.doc()),await i.putBack(t),s=e.any(void 0,x("recalls"),void 0,void 0)}return s}function E(){let e=r();return e?e.webId:void 0}async function I(e,t){return await C(e,t),e.each(void 0,g("type"),x("Bookmark"),void 0)}function O(){let e;let t=E(),[n,s]=i.useState(),[r,o]=i.useState(),[c,d]=i.useReducer((e,t)=>e.concat(t),[]),u=function(){let e=E(),[t,n]=i.useState();return i.useEffect(()=>{if(e){let t=A.JB(),a=t.sym(e),i=new b.A(t,{fetch:l.hd});(async()=>{await i.load(a.doc()),n(t)})()}},[e]),t}(),h=function(e){let t=E(),[n,a]=i.useState();return i.useEffect(()=>{e&&t&&(async()=>{let n=await I(e,t),i=new b.A(e,{fetch:l.hd});await i.load(n.map(e=>e.value)),a(n)})()},[e,t]),n}(u),m=[];async function p(e){if(e.preventDefault(),!u||!t||!n||!r)return;let a={url:n,title:r,created:new Date};d(a),await B(u,t,a)}u&&h&&(e=null==u?void 0:u.any(u.sym(t),k("fn"),void 0,void 0),m=h.map(e=>{let t=u.any(e,x("recalls"),void 0,void 0),n=u.any(e,N("title"),void 0,void 0),a=u.any(e,N("created"),void 0,void 0);return{url:t.value,title:n?n.value:t.value,created:new Date(a?a.value:0)}}));let w=e?"".concat(e.toString(),"'s links"):"Your links";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"hero is-info",children:(0,a.jsx)("div",{className:"hero-body",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("h2",{className:"title",children:w})})})}),(0,a.jsx)("section",{className:"section",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("form",{onSubmit:p,className:"field is-horizontal",children:(0,a.jsxs)("div",{className:"field-body",children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{htmlFor:"shareLink",className:"label",children:"URL"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:"shareLink",required:!0,className:"input is-large",type:"url",placeholder:"e.g. `https://solid.community`",onChange:e=>s(e.target.value)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{htmlFor:"shareTitle",className:"label",children:"Title"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:"shareTitle",required:!0,className:"input is-large",type:"text",placeholder:"e.g. `Solid prototype server`",onChange:e=>o(e.target.value)})})]}),(0,a.jsx)("div",{className:"control pageSubmit",children:(0,a.jsx)("input",{type:"submit",className:"button is-large is-primary",value:"Add link"})})]})}),(0,a.jsx)(v,{links:c.concat(m)})]})})]})}function _(){let[e]=(0,i.useState)("https://pivot.pondersource.com/"),[t,n]=(0,i.useState)();return(0,i.useEffect)(()=>{(0,l.nY)({restorePreviousSession:!0}).then(e=>{n(e)})},[]),(0,a.jsx)("div",{children:(0,a.jsxs)(s.Provider,{value:t,children:[(0,a.jsx)(c,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(O,{}),(0,a.jsx)("footer",{className:"footer",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)(h,{className:"button is-pulled-right",handleLogout:()=>{(0,l.ri)(),n(void 0)},children:"Disconnect"})})})]})}),(0,a.jsx)(u,{children:(0,a.jsx)("section",{className:"section",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)(d,{className:"button is-large is-primary",handleLogin:()=>{(0,l.iD)({redirectUrl:"https://poddit.app/",oidcIssuer:e,clientName:"poddit",clientId:"https://poddit.app/clientid.jsonld"})},children:"Connect to start bookmarking"})})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[114,312,441,517,358],()=>t(6169)),_N_E=e.O()}]);